<div class="form-card">
  <a routerLink="/" class="back-link">← Volver a la lista</a>

  <header class="card-header">
    @if(idContacto()){
      <h1>Editar Contacto</h1>
    } @else {
      <h1>Nuevo Contacto</h1>
    }
    <p>Completa la información a continuación.</p>
  </header>

  <form (ngSubmit)="handleFormSubmission(newContactForm)" #newContactForm="ngForm">
    <div class="form-grid">
      <div class="form-group full-width">
        <label for="first-name">Nombre*</label>
        <input id="first-name" name="firstName" type="text" ngModel required minlength="2" maxlength="20" #firstName="ngModel" placeholder="Ej: Juan">
        @if (firstName.dirty && firstName.invalid) {
          <span class="error-message">El nombre es obligatorio.</span>
        }
      </div>

      <div class="form-group full-width">
        <label for="last-name">Apellido</label>
        <input id="last-name" name="lastName" type="text" ngModel maxlength="20" placeholder="Ej: Pérez">
      </div>

      <div class="form-group">
        <label for="phone">Teléfono*</label>
        <input id="phone" name="number" type="tel" ngModel required minlength="3" maxlength="30" placeholder="Ej: 341 1234567">
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input id="email" name="email" type="email" ngModel maxlength="40" placeholder="Ej: juan.perez@email.com">
      </div>

      <div class="form-group">
        <label for="company">Compañía</label>
        <input id="company" name="company" type="text" ngModel minlength="2" placeholder="Ej: Apple">
      </div>

      <div class="form-group">
        <label for="address">Dirección</label>
        <input id="address" name="address" type="text" ngModel minlength="5" placeholder="Ej: Paraguay 1950">
      </div>

      <div class="form-group full-width">
        <label for="image">URL de la Imagen</label>
        <input id="image" name="image" type="text" ngModel minlength="10" placeholder="https://ejemplo.com/imagen.jpg">
      </div>

      <div class="form-group-checkbox full-width">
        <input id="favourite" name="isFavourite" type="checkbox" ngModel>
        <label for="favourite">Marcar como contacto favorito</label>
      </div>
    </div>

    <footer class="card-actions">
      @if (errorEnBack) {
        <p class="error-message backend-error">Ocurrió un error. Inténtalo de nuevo.</p>
      }
      <a routerLink="/" class="btn btn-secondary">Cancelar</a>
    
      <button type="submit" [disabled]="newContactForm.invalid || isSaving" class="btn btn-primary">
        @if (isSaving) {
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Guardando...</span>
          </div>
        } @else {
          @if(idContacto()){
            <span>Guardar Cambios</span>
          } @else {
            <span>Agregar Contacto</span>
          }
        }
      </button>
    </footer>
  </form>
</div>