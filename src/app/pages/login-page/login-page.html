<div class="login-card">

  <header class="card-header">
    <h1>Iniciar Sesión</h1>
    <p>Bienvenido de nuevo. Ingresa tus credenciales.</p>
  </header>

  <form #loginForm="ngForm" (ngSubmit)="login(loginForm)">
    <div class="card-body">
      <div class="form-group">
        <label for="email">Email</label>
        <div class="input-with-icon">
          <i class="bi bi-person-fill"></i>
          <input
            id="email"
            name="email"
            type="email"
            ngModel
            #email="ngModel"
            required
            placeholder="Ingresá tu email"
            autocomplete="email"
          />
        </div>
        @if (loginForm.controls['email']?.dirty && loginForm.controls['email']?.invalid) {
          <span class="error-message">Debe colocar un correo electrónico válido.</span>
        }
      </div>

      <div class="form-group">
        <label for="password">Contraseña</label>
        <div class="input-with-icon">
          <i class="bi bi-shield-lock-fill"></i>
          <input
            id="password"
            name="password"
            type="password"
            ngModel
            #password="ngModel"
            required
            minlength="4"
            placeholder="Ingresá tu contraseña"
            autocomplete="current-password"
          />
        </div>
        @if (loginForm.controls['password']?.dirty && loginForm.controls['password']?.invalid) {
          <span class="error-message">La contraseña debe tener al menos 4 caracteres.</span>
        }
      </div>
    </div>

    <footer class="card-actions">
      @if (errorLogin) {
        <p class="error-message backend-error">Datos de sesión incorrectos. Inténtalo de nuevo.</p>
      }
    
      <button type="submit" [disabled]="loginForm.invalid || isLoggingIn" class="btn btn-primary">
        @if (isLoggingIn) {
          <div class="spinner-border" role="status">
            <span class="visually-hidden">Loading...</span>
          </div>
        } @else {
          <span>INICIAR SESIÓN</span>
        }
      </button>
    
      <p class="register-link">
        ¿No tenés cuenta? <a routerLink="/register">Registrate</a>
      </p>
    </footer>
  </form>
</div>